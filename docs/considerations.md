# Alessandro Pansera/Mattia Bertacchini - Inventory System
## System's input description
- Project has been realized considering day as UoM. Suppose 1 Month = 30 Days for conversion.
- Items are apple's products... not my personal choice...

## 2^k Factorial Design
### Considerations for the s-d system

On average, obtained best results for the system are:

- [Item 0: s=20, S=42 (d=22)](2k_factorial_design/item_0_analysis.png)
- [Item 1: s=6, S=27 (d=21)](2k_factorial_design/item_0_analysis.png)

## Result

### 1.

After latest changes, systems take too long to be trained:
```log
Training agent: A2C - MLP Policy
Loaded model from models/checkpoints/a2c_mlp_truncated.zip
Training started...
Training Progress:  22%|██▏       | 218446/1000000 [1:30:03<11:13:42, 19.33it/s]
```
### 2. Using same hyperparameters



```log
╒═════════════════════════════╤═════════════════════════════════╤════════════════════════════════╤═══════════════════════════════╤═════════════════════╤═════════════════════════════╤═════════════════════════════════╤════════════════════════════════╤═══════════════════════════════╤═════════════════════╤═══════════════╤══════════╕
│   Inventory position Item 1 │   Delta Quantity Ordered Item 1 │   Delta Time Last Order Item 1 │   Delta Orders Counter Item 1 │   Order Rate Item 1 │   Inventory position Item 2 │   Delta Quantity Ordered Item 2 │   Delta Time Last Order Item 2 │   Delta Orders Counter Item 2 │   Order Rate Item 2 │   Action Item │   Reward │
╞═════════════════════════════╪═════════════════════════════════╪════════════════════════════════╪═══════════════════════════════╪═════════════════════╪═════════════════════════════╪═════════════════════════════════╪════════════════════════════════╪═══════════════════════════════╪═════════════════════╪═══════════════╪══════════╡
│                          20 │                               0 │                              0 │                             0 │                   0 │                         -71 │                               0 │                              0 │                             0 │                   0 │             0 │        0 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          19 │                               8 │                              0 │                             1 │                   8 │                         -74 │                               0 │                              0 │                             0 │                   0 │             8 │     -571 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          19 │                              16 │                              1 │                             2 │                   8 │                         -74 │                               0 │                              0 │                             0 │                   0 │             8 │     -605 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                              24 │                              1 │                             3 │                   8 │                         -74 │                               0 │                              0 │                             0 │                   0 │             8 │     -635 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                              32 │                              1 │                             4 │                   8 │                         -74 │                               0 │                              0 │                             0 │                   0 │             8 │     -669 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                              40 │                              1 │                             5 │                   8 │                         -74 │                               0 │                              0 │                             0 │                   0 │             8 │     -703 │
╘═════════════════════════════╧═════════════════════════════════╧════════════════════════════════╧═══════════════════════════════╧═════════════════════╧═════════════════════════════╧═════════════════════════════════╧════════════════════════════════╧═══════════════════════════════╧═════════════════════╧═══════════════╧══════════╛
╒═════════════════════════════╤═════════════════════════════════╤════════════════════════════════╤═══════════════════════════════╤═════════════════════╤═════════════════════════════╤═════════════════════════════════╤════════════════════════════════╤═══════════════════════════════╤═════════════════════╤═══════════════╤══════════╕
│   Inventory position Item 1 │   Delta Quantity Ordered Item 1 │   Delta Time Last Order Item 1 │   Delta Orders Counter Item 1 │   Order Rate Item 1 │   Inventory position Item 2 │   Delta Quantity Ordered Item 2 │   Delta Time Last Order Item 2 │   Delta Orders Counter Item 2 │   Order Rate Item 2 │   Action Item │   Reward │
╞═════════════════════════════╪═════════════════════════════════╪════════════════════════════════╪═══════════════════════════════╪═════════════════════╪═════════════════════════════╪═════════════════════════════════╪════════════════════════════════╪═══════════════════════════════╪═════════════════════╪═══════════════╪══════════╡
│                          20 │                               0 │                              0 │                             0 │              0      │                         -71 │                               0 │                              0 │                             0 │                 0   │             0 │        0 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          19 │                               0 │                              0 │                             0 │              0      │                         -74 │                             118 │                              0 │                             1 │               118   │           269 │     -901 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          19 │                              64 │                              1 │                             1 │             64      │                         -74 │                             118 │                              0 │                             1 │               118   │            64 │    -1103 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                             138 │                              1 │                             2 │             69      │                         -74 │                             118 │                              0 │                             1 │               118   │            74 │    -1331 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                             138 │                              1 │                             2 │             69      │                         -74 │                             125 │                              3 │                             2 │                62.5 │           158 │    -1362 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                             254 │                              2 │                             3 │             84.6667 │                         -74 │                             125 │                              3 │                             2 │                62.5 │           116 │    -1720 │
╘═════════════════════════════╧═════════════════════════════════╧════════════════════════════════╧═══════════════════════════════╧═════════════════════╧═════════════════════════════╧═════════════════════════════════╧════════════════════════════════╧═══════════════════════════════╧═════════════════════╧═══════════════╧══════════╛
╒═════════════════════════════╤═════════════════════════════════╤════════════════════════════════╤═══════════════════════════════╤═════════════════════╤═════════════════════════════╤═════════════════════════════════╤════════════════════════════════╤═══════════════════════════════╤═════════════════════╤═══════════════╤══════════╕
│   Inventory position Item 1 │   Delta Quantity Ordered Item 1 │   Delta Time Last Order Item 1 │   Delta Orders Counter Item 1 │   Order Rate Item 1 │   Inventory position Item 2 │   Delta Quantity Ordered Item 2 │   Delta Time Last Order Item 2 │   Delta Orders Counter Item 2 │   Order Rate Item 2 │   Action Item │   Reward │
╞═════════════════════════════╪═════════════════════════════════╪════════════════════════════════╪═══════════════════════════════╪═════════════════════╪═════════════════════════════╪═════════════════════════════════╪════════════════════════════════╪═══════════════════════════════╪═════════════════════╪═══════════════╪══════════╡
│                          20 │                               0 │                              0 │                             0 │                   0 │                         -71 │                               0 │                              0 │                             0 │                   0 │             0 │        0 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          19 │                               0 │                              0 │                             0 │                   0 │                         -74 │                              36 │                              0 │                             1 │                  36 │           187 │     -655 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          19 │                               0 │                              0 │                             0 │                   0 │                         -74 │                              72 │                              1 │                             2 │                  36 │           187 │     -773 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                              57 │                              2 │                             1 │                  57 │                         -74 │                              72 │                              1 │                             2 │                  36 │            57 │     -950 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                              60 │                              1 │                             2 │                  30 │                         -74 │                              72 │                              1 │                             2 │                  36 │             3 │     -969 │
├─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼─────────────────────────────┼─────────────────────────────────┼────────────────────────────────┼───────────────────────────────┼─────────────────────┼───────────────┼──────────┤
│                          15 │                              63 │                              1 │                             3 │                  21 │                         -74 │                              72 │                              1 │                             2 │                  36 │             3 │     -988 │
╘═════════════════════════════╧═════════════════════════════════╧════════════════════════════════╧═══════════════════════════════╧═════════════════════╧═════════════════════════════╧═════════════════════════════════╧════════════════════════════════╧═══════════════════════════════╧═════════════════════╧═══════════════╧══════════╛```


### Models
The following models have been trained:
- PPO
- A2C
- DQN

Also a Policy Fixed model has been implemented considering S_Min and S_Max retrivied at 2^K factorial design.

100 Seeds are employed to get the total cost within each model. Average and variance are plotted at the end of all simulations.
<br>
Monitor training executing this bash script:  tensorboard --logdir ./log/a2c_mlp_tensorboard;./log/dqn_mlp_tensorboard;./log/ppo_mlp_tensorboard

### Output
Check for the most recent picture inside [this directory](/docs/system_perf_compare)
